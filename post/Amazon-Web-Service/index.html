<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Amazon Web Service |  hun</title>
    <meta name="description" content="hun">
    <meta name="author" content="hun">
    <meta name="keywords" content="nodejs" />
    <meta name="generator" content="haroopress v0.9.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/rss.xml" rel="alternate" title="hun" type="application/rss+xml">

    <!-- Le styles -->
    <link rel="canonical" href="http://whitebluecloud.github.com">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/markdown.css" rel="stylesheet">
    <link href="/css/haroopress.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/code/default.css" rel="stylesheet">
    
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon-64.png">

    <!-- Le javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.jsonp.js"></script>
    <script src="/js/mustache.js"></script>
    <script src="/js/apps/github.js"></script>
    <script src="/js/apps/twitter.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

        <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <a class="pull-right" href="/rss.xml"><img src="/img/buttons/rss.png" /></a>
          

          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/archives">Archives</a>
              </li>
              <li>
                <a href="/slides">Slides</a>
              </li>
                
            </ul>
          </div>
        </div>
      </div>
    </div>

    
<link href="/css/code/default.css" rel="stylesheet">
<div class="container page-archive">
    <div class="row">
        <div class="span3">
            <div id="author" class="well">
                <div>
                    <h3>About Author</h3>
                    <ul class="thumbnails">
                        <li>
                            <a class="thumbnail">
                                <img src="http://www.gravatar.com/avatar/969a14eb11d6ca9e6a742dc036529bd9?r=pg&amp;s=128.jpg&amp;d=identicon" />
                            </a>
                        </li>
                    </ul>
                    <p>
                        <strong>hun</strong><br/>
                        blog: <a href="undefined" target="_blank">http://whitebluecloud.github.com</a><br/>
                        twitter: <a href="http://twitter.com/undefined" target="_blank">@</a><br/>
                        github: <a href="https://github.com/undefined" target="_blank"></a>
                    </p>
                    <p>
                        <a href="https://twitter.com/" class="twitter-follow-button" data-show-count="true">Follow @</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </p>
                    <p>
                        <p><strong>Please! edit your profile</strong></p>
                    </p>
                </div>
                <div>
                    <h3>About this Article</h3>
                    <p>
                        <h5>Date Released:</h5>
                        <span>Tuesday, November 13 2012 9:29 PM</span>
                    </p>
                </div>
            </div>
                        <div class="well">
                <ul class="nav nav-list">
                    <li class="nav-header">Categories</li>
                    <li class=""><a href="/category"><i class="icon-home"></i> Home</a></li>
                    
                    <li><a href="/category/aws"><i class="icon-book"></i> aws</a></li>
                    
                    <li><a href="/category/haroopress"><i class="icon-book"></i> haroopress</a></li>
                    
                </ul>
            </div>

            
<div class="well">
    <ul class="nav nav-list">
        <li class="nav-header">Recent Articles</li>
    
        <li>
            <a href="/post/Amazon-Web-Service" target="_blank">Amazon Web Service
            <span class="label">hun</span></a>
        </li>
    
        <li>
            <a href="/post/installing-haroopress" target="_blank">installing harooPress
            <span class="label">hun</span></a>
        </li>
    
    </ul>
</div>

        </div>
        <div class="span9">
            <div class="row">
                <div class="span9">
                    <div class="well bg">
                        
                        <div class="page-header">
                            <h1>Amazon Web Service</h1>
                        </div>

                        
                                            

                                            

                        <div class="markdown-wrapper">
                            <h3 id="toc_0">아마존 웹서비스 설치 및 실행과정</h3>

<h2 id="toc_1">Amazon Web Service(AWS), 아마존웹서비스?</h2>
<p>책 파는 걸로 유명한 amazon사에서 운영하는 클라우드서비스인데 상세한 내용은 검색을 하면 나보다 잘 아는 분들이
써놓은 글들이 많을테니 그 부분은 넘어가도록 하고
aws를 사용하게 된 이유는 물리적 or 금전적 or 귀찮음 or 능력 부족으로 서버를 보유하지 못한 사람들이 
처음 1년 동안은 서버를 무료로 사용할 수 있게 해준다고 해서 사용하게 되었다.</p><p>가입절차는 로그를 남기려는 목적이 커서 가입절차에 따른 사진따위는 생략... </p><p>아마존웹서비스 홈페이지 [<a href="http://aws.amazon.com/ko/free/">http://aws.amazon.com/ko/free/</a>]</p>
<h2 id="toc_2">가입</h2>

<ol>
<li>위의 사이트에 들어가 sign up 버튼 클릭</li>
<li>CREATE ACCOUNT 이름 및 결제 정보 입력하고 계속 continue를 누르다보면</li>
<li>PAYMENT METHOD가 나오는데 이 부분에서 아이폰 앱스토어 이용시 실제 유효한 카드인지에 대해 체크하는
부분이 나온다. 자신이 소유한 비자 또는 마스터카드의 정보를 입력하면 $1이 결제되고 다시 결제취소가 되어 $1가 
돌아오게 된다.</li>
<li>IDENTITY VERIFICATION 에는 휴대폰 번호를 입력한다.
Country Code는 korea
Phone Number에는 010-xxxx-xxxx에서 0을 뺀 10xxxxxxxx
ext는 아무것도 입력하지 않고
Call Me Now 버튼을 클릭하면!!! 국제전화가 옵니다.;;;
하지만 침착하게 앞에 나오는 PIN번호 4자리를 입력합니다.</li>
<li>가입한 이메일로 인증메일이 도착합니다. 그 메일을 열어서 인증을 완료하면 가입이 완료된다.</li>
</ol>

<h2 id="toc_3">Instance 생성</h2>
<p>이제 가입을 했으니 instance를 생성해보자.</p><p>로그인을 하면</p><p><img src="./@img/a_1.png" alt="AWS Console 화면">
이와 같은 화면이 나오게 된다.</p><p>왼쪽에 다양한 메뉴들이 있지만 일단 패스하고 가운데에 있는 <em class="label label-important"><strong>Launch Instance</strong></em>를 클릭하면</p><p>아래의 뷰가 뜨게 된다.</p><p><img src="./@img/a_2.png" alt="instance 생성 화면">
위 classic wizard는 여러 서버목록이 다양하게 있으며 자신이 직접 서버환경설정을 해놓아 저장을 할 수도 있다.
입맞에 맞는 서버셋팅을 고를 수도 있으나, 난 입맛에 맞게 선택할 형편이 안되므로
quick Launch Wizard -&gt; Amazon Linux AMI 2012.03을 선택(여러가지로 해본 결과 나에게는 이게 제일 나았음)</p><p>continue를 누르기 전에! 중요한 aws를 사용하는데 중요한 부분인 Choose a key pair라는 항목을 보면</p><p>기존에 처음 만든 사람들은 None으로 체크되어 있을 것이다.</p><p>Create New를 누르고 aws서버에 접근할 때 필요한 키를 생성한다.(중요)</p><p>적당한 이름으로 생성을 하고 download를 눌러 컴퓨터에 잘 저장해놓는다.(확장자 pem)</p><p>그리고 continue 를 누르면 생성이 된다. </p><p>이제 instance(서버)를 생성했다.</p>
<h2 id="toc_4">Instance 설정</h2>
<p>aws 메인에서 aws management console을 클릭하면 console화면이 나오게 된다.</p><p><img src="./@img/b_1.png" alt="instance 생성 화면"></p><p>계정 생성 후에는 이 페이지만 즐겨찾기 추가해놓고 사용하면 된다.</p><p>서버가 생성되면 initializing상태가 되는데 1~3분 정도 지나면 2/2 checks passed 라는 상태로 바뀌게 되고</p><p>서버가 정상적으로 작동하게 된다.</p><p>왼쪽에 탭중 주로 쓰게 되는 중요한 메뉴는 Instances, Security Groups, Elastic IPs, Key Pairs다.</p><p><img src="./@img/b_2.png" alt="instance 생성 화면">
생각해보니 instance 생성시에 quicklaunch로 생성하게 되면 quick-launch-0으로 셋팅될 것이다.</p><p>해당 그룹을 선택후 아래에 뜨는 inbound 탭을 클릭하면</p><p>서버에서 inbound로 들어오는 port를 열 수 있다. default로 22(ssh)가 열려 있을 텐데</p><p>80(http), 3306(MYSQL), 443(HTTPS)를 열어둔다.(port range, source는 일단 무시하고 add rule 후에</p><p>apply rule changes를 클릭한다. </p><p><img src="./@img/b_3.png" alt="instance 생성 화면">
이 부분은 생성한 서버에 public ip를 연결하는 부분이다.</p><p>Allocate New Address 클릭 후 EC2를 선택해 생성하면 위와 같은 ip가 생성되고 해당 ip를 클릭 후</p><p>오른쪽 버튼을 누르고 associate를 통해 좀 전에 생성한 서버와 연결을 할 수 있다.</p><p>여기까지하면 기본적으로 접속을 위한 서버세팅을 마쳤다.</p>
<h2 id="toc_5">putty를 통해 instance에 접근</h2>
<p>instance에 접근하는 방법은 
1. instances로 가서 해당 서버에 오른쪽 버튼 클릭 후 connect를 누르면 직접 접근
2. putty, xshell을 이용한 서버 접근 툴을 사용한다.</p><p>1의 경우는 해보면 아니 생략하고,</p><p>기존에 쓰고 있는 툴(putty의 경우)을 사용해 접근하는 방법에 대해 알아보면</p><p>(putty download) [<a href="http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</a>]</p><p>위의 url을 클릭해 putty와 puttygen을 다운 받는다.</p><p>putty는 쉘 접속 프로그램이고,
puttygen은 서버 접속시 ssh 암호키를 필요로 하는 경우에 사용할 암호키를 생성하는 툴이다.</p><p>먼저 puttygen 설치 후</p>
<ol>
<li>Load 버튼 클릭</li>
<li>전에 instance 생성 때 만든 암호키(xxx.pem)를 선택한다.</li>
<li>save private key를 클릭한다.(key passphrase에 암호를 입력하면 접근할 때마다 암호 입력..)</li>
</ol>
<p>하면 xxx.ppk라는 키가 생성된다.</p><p>여기까지 puttygen을 통해 암호키를 생성하는 부분이고,</p><p>이제 putty를 실행 host name에 전에 서버에 연결한 Elastic IP를 넣는다.</p><p>category 중 Connection -&gt; SSH -&gt; Auth 클릭 후 맨 아래에 있는 browse를 클릭 후 방금 생성한 xxx.ppk를 넣고 </p><p>open을 누르면 쉘 접속이 된다. 
(그 전에 putty session을 생성해서 저장해놓으면 설정 입력없이 바로 서버에 접근 가능..이건 putty설정이니 패스)</p><p>quick launch instance를 통해 생성했다면</p><p>ec2-user라고 입력하면 자동으로 로그인 될 것이다.(ubuntu로 생성한 서버는 ubuntu 라고 치면 됨)</p>
<h2 id="toc_6">FTP 접속하기</h2>
<p>저번 글에는 Putty로 쉘 접근을 해보았다.</p><p>이번엔 이미지나 기타 다운로드한 파일들을 sftp로 올리는 방법에 대해 적어본다.</p><p>먼저 filezilla, 알ftp 같은 ftp 접속 툴을 다운 받는다.</p><p>Filezilla
<a href="http://filezilla-project.org/">http://filezilla-project.org/</a> </p><p>설치 후 편집 -&gt; 설정 으로 들어가</p><p>연결 -&gt; SFTP 를 누르면
<img src="./@img/3_1.png" alt="instance 생성 화면">
위와 같은 화면을 볼 수 있다.</p><p>키 파일 추가 버튼을 클릭하여 putty를 접속할 때 생성한 xxx.key파일을 추가하면 된다.</p><p>확인 버튼을 누르고 나와</p><p>파일 -&gt; 사이트 관리자를 클릭하면 아래와 같은 창이 뜬다.
<img src="./@img/3_2.png" alt="instance 생성 화면">
 새 사이트 생성버튼 클릭 후 적당한 이름을 적어주고 호스트에 서버 호스트(IP)를 적고 </p><p>프로토콜은 SFTP, 사용자에 ec2-user(우분투의 경우 ubuntu)를 기입하고 연결하면</p><p>ftp로 업로드가 가능</p>
<h2 id="toc_7">APM 설정</h2>
<p>아마존리눅스 AMI를 통해 설치하면 기본적인 apm관련 실행파일이 설치되어 있다.</p><p>빠진게 존재할 수도 있으므로 추가적으로 설치를 진행해보자.</p><p>putty로 접속하면 아래와 같은 화면을 볼 수 있다.
<img src="./@img/5_1.png" alt="instance 생성 화면">
이제 apm설정을 위해 루트로 접속해야 한다.</p><p>sudo su(루트계정으로 접근)</p><p>모듈 설치를 위해 yum을 업데이트 (만약 yum이 없다면... 구글링을 통해 설치 ㅎㅎ)</p><p>yum update </p><p>yum으로 업데이트할 목록이 나오고 업데이트를 할거냐고 묻는다.</p><p>y를 눌러줍니다.</p><p>sudo yum install php-mysql php php-xml php-mcrypt php-mbstring php-cli mysql httpd  (엔터)
sudo yum install mysql-server</p><p>설치 후 sudo /etc/init.d/mysqld start 를 치고</p><p>mysql이 정상적으로 가동됐다는 메세지가 나오면 mysql이 정상적으로설치 된 것이다.</p><p>mysqladmin -u root password &#39;사용할 루트계정의 비밀번호&#39;</p><p>를 통해 비밀번호 디비접속 root계정의 비밀번호 설정을 할 수 있다.</p><p>아파치 설정을 위해</p><p>vi /etc/httpd/conf/httpd.conf 를 실행하면</p><p>아파치 웹서버 설정을 할 수 있는데 자세한 설정 방법은 검색을 통해 설정하시고 서버가 제대로 작동하는지에 대한</p><p>여부를 파악하기 위해 기본적인 설정만 해보도록 하겠다.</p><p>/var/www/html 를 쳐서</p><p>DocumentRoot &quot;/var/www/html&quot; 과 <Directory "var/www/html"> 을 찾는다.</p><p>이 두 라인은 웹서버 접속시 루트폴더를 설정하는 부분인데 이것을 입맞에 맞게 설정한다.</p><p>저 같은 경우는 /www 로 수정했음.</p><p>DirectoryIndex index.html이란 부분을 찾아 index.php 를 추가해준다.
이제 저장하고 나와서 방금 설정한 웹서버 루트 경로로 들어가
테스트를 위해 index.php 파일을 생성해 웹브라우져로 접속해보면 정상적으로 화면에 php파일이 출력될 것이다.</p>
<h2 id="toc_8">후기</h2>
<p>아마존웹서비스를 통해 cloud 서버를 사용하여 apm 세팅을 마쳤다.
apm셋팅이나 기타 세팅은 각자 자신만의 세팅을 하면 될 것 같다.</p><p>(중요사항) 아 서버 instance와 elastic ip는 하나씩만 생성하자!!!!
ip를 생성해놓고 associate안하거나 2개 이상 생성하면 시간단위로 요금이 붙는다.......ㅠ</p>
                        </div>
                        <hr />
                                            
                        <div class="row-fluid">
                            
                            <div class="pull-right">
                                <a href="/post/installing-haroopress" class="btn btn-info">installing harooPress <i class="icon-white icon-chevron-right"></i></a>
                            </div>
                            

                            
                        </div>
                    

                        <div class="row-fluid">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = ''; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

                    </div>
                </div>
            </div>
            <div class="row">
            </div>
        </div>
    </div>
    <!--<div class="row">-->
        <!--<div class="offset3 span9">-->
            <!--<strong>tags</strong> :-->
            <!---->
            <!--<a href="/tag/Node.js">Node.js</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/nodejs">nodejs</a>&nbsp;-->
            <!---->
        <!--</div>-->
    <!--</div>-->
</div><!-- /container -->


        <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="span12 ">
                    <div class="well">
                        <p class="pull-right"><a href="#">Back to top</a></p>
                            <strong>haroopress</strong> developed by <a href="http://twitter.com/rhiokim" target="_blank">@rhiokim</a>,<a href="http://twitter.com/haroopress" target="_blank">@haroopress</a> and source in <a href="https://github.com/rhiokim/haroopress" target="_blank">github</a><br/>
                            Designed and built with all the love in the world <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>.<br />
                            Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
                    </div>
                </div>
            </div>
        </div>
    </footer>

    


</body>
</html>
