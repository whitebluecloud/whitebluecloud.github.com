<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Javascript Patterns |  hun</title>
    <meta name="description" content="hun">
    <meta name="author" content="hun">
    <meta name="keywords" content="nodejs" />
    <meta name="generator" content="haroopress v0.9.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/rss.xml" rel="alternate" title="hun" type="application/rss+xml">

    <!-- Le styles -->
    <link rel="canonical" href="http://whitebluecloud.github.com">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/markdown.css" rel="stylesheet">
    <link href="/css/haroopress.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/code/default.css" rel="stylesheet">
    
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon-64.png">

    <!-- Le javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.jsonp.js"></script>
    <script src="/js/mustache.js"></script>
    <script src="/js/apps/github.js"></script>
    <script src="/js/apps/twitter.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

        <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>

          <a class="pull-right" href="/rss.xml"><img src="/img/buttons/rss.png" /></a>
          

          <div class="nav-collapse">
            <ul class="nav">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/archives">Archives</a>
              </li>
              <li>
                <a href="/slides">Slides</a>
              </li>
                
            </ul>
          </div>
        </div>
      </div>
    </div>

    
<link href="/css/code/default.css" rel="stylesheet">
<div class="container page-archive">
    <div class="row">
        <div class="span3">
            <div id="author" class="well">
                <div>
                    <h3>About Author</h3>
                    <ul class="thumbnails">
                        <li>
                            <a class="thumbnail">
                                <img src="http://www.gravatar.com/avatar/969a14eb11d6ca9e6a742dc036529bd9?r=pg&amp;s=128.jpg&amp;d=identicon" />
                            </a>
                        </li>
                    </ul>
                    <p>
                        <strong>hun</strong><br/>
                        blog: <a href="undefined" target="_blank"></a><br/>
                        twitter: <a href="http://twitter.com/undefined" target="_blank">@</a><br/>
                        github: <a href="https://github.com/undefined" target="_blank">http://whitebluecloud.github.com</a>
                    </p>
                    <p>
                        <a href="https://twitter.com/" class="twitter-follow-button" data-show-count="true">Follow @</a>
                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                    </p>
                    <p>
                        
                    </p>
                </div>
                <div>
                    <h3>About this Article</h3>
                    <p>
                        <h5>Date Released:</h5>
                        <span>Tuesday, January 22 2013 1:12 AM</span>
                    </p>
                </div>
            </div>
                        <div class="well">
                <ul class="nav nav-list">
                    <li class="nav-header">Categories</li>
                    <li class=""><a href="/category"><i class="icon-home"></i> Home</a></li>
                    
                    <li><a href="/category/javscript"><i class="icon-book"></i> javscript</a></li>
                    
                    <li><a href="/category/aws"><i class="icon-book"></i> aws</a></li>
                    
                    <li><a href="/category/nodejs"><i class="icon-book"></i> nodejs</a></li>
                    
                </ul>
            </div>

            
<div class="well">
    <ul class="nav nav-list">
        <li class="nav-header">Recent Articles</li>
    
        <li>
            <a href="/post/javascript-patterns" target="_blank">Javascript Patterns
            <span class="label">hun</span></a>
        </li>
    
        <li>
            <a href="/post/start-node-dot-j-s" target="_blank">Start Node.JS
            <span class="label">hun</span></a>
        </li>
    
        <li>
            <a href="/post/Amazon-Web-Service" target="_blank">Amazon Web Service
            <span class="label">hun</span></a>
        </li>
    
    </ul>
</div>

        </div>
        <div class="span9">
            <div class="row">
                <div class="span9">
                    <div class="well bg">
                        
                        <div class="page-header">
                            <h1>Javascript Patterns</h1>
                        </div>

                        
                                            

                                            

                        <div class="markdown-wrapper">
                            <p>자바스크립트 코딩기법과 핵심패턴에 대해 프린트하여 보기 좋게 정리하기 위해 포스팅</p>
<h3 id="toc_0">개 요</h3>

<h2 id="toc_1">유지보수 가능한 코드 작성</h2>
<p>유지보수가 가능한 코드란 다음과 같은 특징을 가짐
읽기 쉽다.
일관적이다.
예측 가능하다.
한 사람이 작성한 것처럼 보인다.
문서화되어 있다.</p>
<h2 id="toc_2">전역변수를 최소화 하라!</h2>
<p>전역변수는 자바스크립트 애플리케이션이나 웹페이지 모든 코드 사이에서 공유된다는 문제점이 있다.
그러므로 전역변수는 최소한으로 사용한다.</p><pre><code class="javscript">myglobal = <span class="string">"hello"</span>; <span class="comment">//안티패턴</span>
console<span class="variable">.log</span>(myglobal); <span class="comment">//hello</span>
console<span class="variable">.log</span>(<span class="keyword">this</span><span class="variable">.myglobal</span>); <span class="comment">//hello</span>
console<span class="variable">.log</span>(window<span class="variable">.myglobal</span>); <span class="comment">//hello</span>
console<span class="variable">.log</span>(window[<span class="string">"myglobal"</span>]); <span class="comment">//hello</span>
</code></pre>
<h2 id="toc_3">암묵적 전역(implied globals)</h2>
<p>암묵적 전역은 절대적으로 피하는 것이 좋다. 아래 예도 그렇지만 다른 이유로 이식성(portability) 때문. 암묵적 전역 변수가 새로운 실행환경에서 호스트 객체를 의도치 않게 덮어쓸 수 있기 때문. </p><pre><code class="javscript"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(x, y)</span> {</span>
    result = x + y; <span class="comment">//안티패턴 - 전역 네임스페이스에 result 변수가 남게된다.</span>
    <span class="keyword">return</span> result;
}

<span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">(x, y)</span> {</span>
    <span class="keyword">var</span> result = x + y; <span class="comment">//추천패턴 - 언제나 var을 사용해 변수를 선언해야 한다. 이때 result는 지역변수가 된다.</span>
    <span class="keyword">return</span> result;
}

<span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> a = b = <span class="number">0</span>; <span class="comment">//안티패턴 - 이것은 var a = (b = 0); 과 같다. 즉 b가 암묵적 전역이 된다.</span>
}

<span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> a, b;
    a = b = <span class="number">0</span>; <span class="comment">//추천패턴 - 이 경우 모두 지역변수가 된다.</span>
}
</code></pre>
<h2 id="toc_4">단일 var 패턴을 사용하라</h2>
<p>아래처럼 사용하는 패턴이 좋다. 장점은 변수 찾기 용이(명시적)이며, 로직상 오류를 방지(예를 들어 호이스팅)한다. 또한 의도적이지 않은 전역 변수 사용을 최소화할 수 있다. 뿐만아니라 코드링이 줄어든다. </p><pre><code class="javscript"><span class="function"><span class="keyword">function</span> <span class="title">func</span><span class="params">()</span> <span class="comment">{
    var a = 1,
    b = 2,
    sum = a + b,
    myobject = {}</span>,
    <span class="title">el</span> = <span class="title">document</span>.<span class="title">getElementById</span><span class="params">("result")</span>,
    <span class="title">style</span> = <span class="title">el</span>.<span class="title">style</span>
    <span class="title">i</span>,
    <span class="title">j</span>;</span>
}
</code></pre>
<h2 id="toc_5">호이스팅(hoisting)</h2>
<p>호이스팅(끌어올리기)은 함수내에 어디서든 var 선언을 사용하더라도 함수 상단에 선언한 것과 동일한 동작을 하는 방식을 말함. 중요한 것은 선언만 호이스팅되는 것이지... 정의는 호이스팅 되지 않는다. </p>
<h2 id="toc_6">for 루프</h2>
<p>다음처럼은 절대 쓰지 않는다. </p><pre><code class="javscript"><span class="keyword">for</span>(var <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; <span class="transposed_variable">myArray.</span><span class="built_in">length</span>; <span class="built_in">i</span>++) <span class="cell">{
    //myarray[i]를 다루는 코드
}</span>
</code></pre><p>다음 처럼 쓴다.</p><pre><code class="javscript"><span class="keyword">for</span>(var <span class="built_in">i</span> = <span class="number">0</span>, max = <span class="transposed_variable">myarray.</span><span class="built_in">length</span>; <span class="built_in">i</span> &lt; max; <span class="built_in">i</span>++) <span class="cell">{
    //myarray[i]를 다루는 코드
}</span>
</code></pre><p>for내에 var 선언은 단일 var 패턴을 해도 된다. 
i++대신 i = 1을 사용하는 것이 좋다. +, --는 과도한 기교를 조장한다는 이유이다.</p><p>미세 최적화를 위해 두가지 패턴을 활용한다.
변수를 하나 덜 쓴다.
카운트를 거꾸로 0으로 내려간다. 0과 비교하는 것이 0이 아닌 값으로 비교하는 것보다 빠르기 때문.</p>
<h2 id="toc_7">for-in 루프</h2>
<p>for-in으로 루프를 도는 것을 열거(enumeration)라고 한다. 이 루프는 반드시 배열이 아닌 객체를 순회할 때만 사용한다. </p><p>프로토타입 프로퍼티만을 걸러내기 위해 hasOwnProperty() 메서드를 사용한다. </p><pre><code class="javscript"><span class="function"><span class="title">for</span><span class="params">(var i in man)</span> {
    <span class="title">if</span><span class="params">(man.<span class="function_name">hasOwnProperty</span>(i))</span> {
        <span class="title">console</span>.<span class="title">log</span><span class="params">(i, <span class="string">":"</span>, man[i])</span>;
    }
}
</code></pre><p>다음처럼 해도 된다. 이 방법은 man객체가 hasOwnProperty를 재정의하여 덮어써도 활용할 수 있다. </p><pre><code class="javscript">var i,
    has<span class="variable">Own</span> = <span class="variable">Object</span>.prototype.has<span class="variable">OwnProperty</span>;
<span class="function"><span class="title">for</span><span class="params">(i in man)</span> {
    <span class="title">if</span><span class="params">(has<span class="variable">Own</span>.<span class="function_name">call</span>(m, i))</span> {
        <span class="title">console</span>.<span class="title">log</span><span class="params">(i, <span class="string">":"</span>, man[i])</span>;
    }
}
</code></pre><p>내장 생성자 프로토타입은 되도록 확장하지 말자.
생성자 함수의 prototype 프로퍼티를 확장하는 것은 기능을 추가하는 좋은 방법이나 너무 강력함. 
그러므로 Object(), Array(), Function()과 같은 내장 생성자의 프로토타입을 확장하는 것은 매력적이나 코드의 지속성을 심각하게 저해할 수 있다.
하지만 무조건 나쁘지만은 않으므로 꼭 필요한 경우 정의한다.</p><pre><code class="javscript"><span class="keyword">if</span> (typeof Object.prototype.myMethod !== <span class="string">"function"</span>) {
    Object.prototype.myMethod = <span class="keyword">function</span> () {  
        // 구현<span class="keyword">...</span>
    };
}
</code></pre>
<h2 id="toc_8">switch 패턴</h2>
<p>case문을 switch문에 맞추어 정렬
case문 안에서 코드를 들여쓰기 한다.
case문은 명확히 break;로 종료
break문을 생략하여 통과시키지 않는다. 필요한 경우 기록을 남긴다.
반드시 default:을 쓴다.</p><pre><code class="javscript">switch( inspect_me) {
    case <span class="number">0</span>:
        result = <span class="string">"zero"</span><span class="comment">;</span>
        <span class="keyword">break</span><span class="comment">;</span>
    case <span class="number">1</span>:
        result = <span class="string">"one"</span><span class="comment">;</span>
        <span class="keyword">break</span><span class="comment">;</span>
    default:
        result = <span class="string">"unknown"</span><span class="comment">;</span>
}
</code></pre>
<h2 id="toc_9">암묵적 캐스팅 피하기</h2>
<p>false 0, &quot;&quot; 0 이 모두 true가 되기 때문에
암묵적 캐스팅으로 인한 혼동을 막기 위해 완전항등연산자인 ===, !== 연산자 만을 사용한다. </p>
<h2 id="toc_10">evel()은 보안문제로 무조건 피하라!</h2>
<p>setInterval(), setTimeout(), Function() 생성자에 문자열을 넘기는 것도 eval()처럼 문제가 발생할 수 있으므로 피한다.</p><pre><code class="javscript"><span class="keyword">var</span> property = <span class="string">"name"</span>;
alert(<span class="keyword">eval</span>(<span class="string">"obj."</span> + property)); <span class="comment">//안티패턴</span>
setTimeout(<span class="string">"myFunc()"</span>, <span class="number">1000</span>); <span class="comment">//안티패턴</span>
setTimeout(<span class="string">"myFunc(1, 2, 3)"</span>, <span class="number">1000</span>); <span class="comment">//안티패턴</span>
</code></pre><p>만약 eval()을 사용해야하는 경우가 발생한다면 new Function(); 을 고려하자. eval()은 유효범위 체인에 간섭을 일으킬 수 있는 단점이 있는 반해, Function은 좀더 봉인 되어 있다. new Function()과 Function()은 동일하다. </p>
<h2 id="toc_11">parseInt()를 통한 숫자 변환</h2>
<p>문자를 숫자로 바꾸는 방법은 parseInt(&quot;05&quot;, 10)와 Number(&quot;05&quot;) 방법이 있다. 단, parseInt의 경우 &quot;05&quot;처럼 앞에 0이 있는 경우에는 반드시 두번째 인자가 10(10진수의 의미)이 되어야 한다. 하지만 Number는 상관없다. Number의 경우 &quot;05 hello&quot;등은 바꿀 수 없고 NaN처리 되지만 parseInt()는 5가 잘 나온다. </p>
<h2 id="toc_12">코딩규칙</h2>
<p>적절한 들여쓰기 사용
중괄호는 생략할 수 있어도 꼭 쓸 것
중괄호 여는 위치는 &quot;세미콜론 삽입 장치&quot; 문제로 반드시 아래처럼 쓰는게 좋다.</p><pre><code class="javscript"><span class="function"><span class="keyword">function</span> <span class="title">func</span><span class="params">()</span> {</span>
    <span class="keyword">return</span> <span class="cell">{
        name: "Batman"
    }</span>;
}
</code></pre><p>공백은 코드가 숨쉴 수 있게하는 요소. 하지만 코드 컨벤션에 따라서 쓰면 되겠다.</p>
<h2 id="toc_13">명명규칙</h2>
<p>생성자는 대문자로 시작
단어 구분에는 낙타표기법(camel case) 사용 - 단 생성자는 대문자 낙타표기법은 함수는 소문자 낙타표기법을 사용한다.
상수는 대문자와 <em>를 적절히 사용한다.
private나 protected는 _</em>myPrivateMethod, _myProtectedMethod 처럼 구분하도록 하자.</p>
<h2 id="toc_14">주석 작성</h2>
<p>YUIDoc(<a href="http://yuilibrary.com/projects/yuidoc">http://yuilibrary.com/projects/yuidoc</a>), JSDoc(<a href="http://code.google.com/p/jsdoc-toolkit">http://code.google.com/p/jsdoc-toolkit</a>) 활용 </p>
<h2 id="toc_15">출시단계 압축</h2>
<p>야후의 YUICompressor 나 구글의 Closure Compiler 활용. </p>
<h2 id="toc_16">JSLint 실행</h2>
<p>지금까지 다룬 패턴 위반사례를 잡아줌. </p>
                        </div>
                        <hr />
                                            
                        <div class="row-fluid">
                            
                            <div class="pull-right">
                                <a href="/post/Amazon-Web-Service" class="btn btn-info">Amazon Web Service <i class="icon-white icon-chevron-right"></i></a>
                            </div>
                            

                            
                        </div>
                    

                        <div class="row-fluid">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = ''; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

                    </div>
                </div>
            </div>
            <div class="row">
            </div>
        </div>
    </div>
    <!--<div class="row">-->
        <!--<div class="offset3 span9">-->
            <!--<strong>tags</strong> :-->
            <!---->
            <!--<a href="/tag/Javscript">Javscript</a>&nbsp;-->
            <!---->
            <!--<a href="/tag/patterns">patterns</a>&nbsp;-->
            <!---->
        <!--</div>-->
    <!--</div>-->
</div><!-- /container -->


        <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="span12 ">
                    <div class="well">
                        <p class="pull-right"><a href="#">Back to top</a></p>
                            <strong>haroopress</strong> developed by <a href="http://twitter.com/rhiokim" target="_blank">@rhiokim</a>,<a href="http://twitter.com/haroopress" target="_blank">@haroopress</a> and source in <a href="https://github.com/rhiokim/haroopress" target="_blank">github</a><br/>
                            Designed and built with all the love in the world <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/mdo" target="_blank">@mdo</a> and <a href="http://twitter.com/fat" target="_blank">@fat</a>.<br />
                            Code licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>. Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
                    </div>
                </div>
            </div>
        </div>
    </footer>

    


</body>
</html>
